# TexProcess

A command-line tool for texture processing operations including threshold and inpainting.

## Usage

```bash
UCommon_Apps_TexProcess <command> <input> <output> [options]
```

## Commands

### Threshold

Apply threshold to texture. Pixels below threshold are set to 0.

```bash
UCommon_Apps_TexProcess threshold <input> <output> <threshold_value>
```

**Arguments:**
- `<input>`: Path to input texture file (PNG/HDR)
- `<output>`: Path to output texture file
- `<threshold_value>`: Threshold value (float). Pixels with values below this threshold will be set to 0

**Example:**
```bash
UCommon_Apps_TexProcess threshold input.hdr output.hdr 0.5
```

This will set all pixel values below 0.5 to 0, while keeping values >= 0.5 unchanged.

### Inpainting

Apply image inpainting to fill regions where all channels are 0.

```bash
UCommon_Apps_TexProcess inpainting <input> <output>
```

**Arguments:**
- `<input>`: Path to input texture file (PNG/HDR)
- `<output>`: Path to output texture file

**Coverage Detection:**
The coverage map is automatically generated based on pixel values:
- Pixels where **all channels are 0** are considered uncovered (need inpainting)
- Pixels where **any channel is non-zero** are considered covered (valid data)

**Example:**
```bash
UCommon_Apps_TexProcess inpainting input.hdr output.hdr
```

This will fill all regions where pixels have all channels equal to 0 by propagating nearby valid pixel values.

## Workflow Example

You can combine threshold and inpainting operations:

```bash
# Step 1: Apply threshold to remove low-intensity pixels
UCommon_Apps_TexProcess threshold input.hdr temp.hdr 0.1

# Step 2: Fill the resulting zero regions with inpainting
UCommon_Apps_TexProcess inpainting temp.hdr output.hdr
```

## Build

The tool is automatically built as part of the UCommon project when CMake is configured.

```bash
cmake -B build -S .
cmake --build build --config Release --target UCommon_Apps_TexProcess
```

The executable will be placed in the `bin/` directory.

## Technical Details

- **Threshold**: Uses `FTex2D::Threshold()` method which sets values below threshold to 0
- **Inpainting**: Uses `FTex2D::ImageInpainting()` method with mipmap-based propagation
- **Coverage**: Automatically generated by checking if all channels of a pixel are 0
- **Format Support**: Supports both PNG (uint8) and HDR (float) formats
- **Type Conversion**: Automatically converts between Uint8 and Float as needed for processing

